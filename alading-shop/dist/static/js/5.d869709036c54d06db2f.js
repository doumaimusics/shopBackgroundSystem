webpackJsonp([5],{"06/Q":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.deliveryDialog[data-v-1c7d1cb8] {\n  position: relative;\n  display: inline-block;\n}\n.deliveryDialog[data-v-1c7d1cb8] .el-dialog {\n    max-height: 80%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.deliveryDialog[data-v-1c7d1cb8] .el-dialog__body {\n    padding: 0 20px;\n    padding-bottom: 10px;\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    overflow: auto;\n}\n.deliveryPath[data-v-1c7d1cb8] {\n  padding: 0 20px;\n}\n.deliveryPath ul > li[data-v-1c7d1cb8] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    position: relative;\n}\n.deliveryPath ul > li .date[data-v-1c7d1cb8] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      width: 100px;\n      min-width: 100px;\n      max-width: 100px;\n      border-right: 1px solid #aaa;\n      padding-top: 10px;\n      text-align: right;\n      color: #aaa;\n}\n.deliveryPath ul > li .date p[data-v-1c7d1cb8] {\n        padding-right: 20px;\n}\n.deliveryPath ul > li .path[data-v-1c7d1cb8] {\n      -webkit-box-flex: 5;\n          -ms-flex: 5;\n              flex: 5;\n      height: 60px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      overflow: hidden;\n      color: #aaa;\n      padding-left: 15px;\n}\n.deliveryPath ul > li i[data-v-1c7d1cb8] {\n      position: absolute;\n      left: 99px;\n      top: 50%;\n      -webkit-transform: translate(-50%, -50%);\n              transform: translate(-50%, -50%);\n      z-index: 1;\n      color: #aaa;\n}\n.deliveryPath ul > li:first-child i[data-v-1c7d1cb8] {\n      color: #666;\n      font-size: 22px;\n}\n.deliveryPath ul > li:first-child .path[data-v-1c7d1cb8],\n    .deliveryPath ul > li:first-child .date[data-v-1c7d1cb8] {\n      color: #666;\n}\n.deliveryPath ul > li:last-child i[data-v-1c7d1cb8] {\n      font-size: 22px;\n}\n.btnOper[data-v-1c7d1cb8] {\n  text-align: right;\n  padding-right: 20px;\n}\n",""])},"74xR":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.orderInfo h3[data-v-533b5c1d] {\n  padding: 20px 0;\n  font-weight: 700;\n}\n.section[data-v-533b5c1d] {\n  margin-bottom: 40px;\n}\n.section h4[data-v-533b5c1d] {\n    margin-bottom: 20px;\n    font-weight: 700;\n}\n.section .sectionMain[data-v-533b5c1d] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n.section .sectionMain li[data-v-533b5c1d] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      width: 33.3%;\n      min-width: 33.3%;\n      max-width: 33.3%;\n      padding-bottom: 20px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      word-break: break-all;\n      padding-right: 20px;\n}\n.section .sectionMain li p[data-v-533b5c1d]:first-child {\n        width: 100px;\n        color: #666;\n}\n.section .sectionMain .addressLi[data-v-533b5c1d] {\n      width: 66.6%;\n      min-width: 66.6%;\n      max-width: 66.6%;\n}\n.deliveryAbout .editDelivery[data-v-533b5c1d] {\n  padding-top: 20px;\n}\n.deliveryAbout .editDelivery[data-v-533b5c1d] .deliveryDialog {\n    padding-left: 20px;\n}\n.back[data-v-533b5c1d] {\n  text-align: right;\n  padding: 0 40px;\n}\n",""])},"7DV6":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.aftersServiceDetail[data-v-2f78a8a3] {\n  padding: 20px;\n  font-size: 14px;\n}\n.closeForm[data-v-2f78a8a3] .el-form-item__error {\n  left: 91px;\n}\n.closeForm .num[data-v-2f78a8a3] {\n  margin-left: 92px;\n}\n.approve[data-v-2f78a8a3] {\n  /*padding-bottom: 40px;*/\n}\n.approve .yesOrNo[data-v-2f78a8a3] {\n    display: inline-block;\n}\n.approve .yesOrNo .el-button[data-v-2f78a8a3] {\n      border-color: #b3d8ff;\n}\n.approve .agreeInfo[data-v-2f78a8a3] {\n    padding: 20px 0;\n}\n.approve .agreeInfo .el-radio[data-v-2f78a8a3] {\n      padding: 15px 0;\n}\n.approve .agreeInfo .el-select[data-v-2f78a8a3] {\n      padding-left: 10px;\n      width: 300px;\n}\n.approve .agreeInfo span[data-v-2f78a8a3] {\n      color: red;\n      padding-left: 5px;\n      font-size: 16px;\n}\n.approve .refuseInfo[data-v-2f78a8a3] {\n    padding: 20px 0;\n}\n.approve .refuseInfo span[data-v-2f78a8a3] {\n      display: inline-block;\n      padding-bottom: 20px;\n      /*color: red;*/\n}\n.approve .refuseInfo .el-textarea[data-v-2f78a8a3] {\n      width: 380px;\n}\n.approve .refuseInfo p[data-v-2f78a8a3] {\n      color: #999;\n      font-size: 12px;\n      padding-top: 10px;\n      padding-left: 74px;\n}\n.approve .refuseInfo.redWarning[data-v-2f78a8a3] textarea {\n      border-color: red;\n}\n.approve .confirm[data-v-2f78a8a3] {\n    padding: 20px 0;\n}\n.approve .confirm .el-button[data-v-2f78a8a3] {\n      padding-right: 40px;\n      padding-left: 40px;\n}\n.agree[data-v-2f78a8a3] {\n  padding-top: 10px;\n  padding-bottom: 60px;\n}\n.agree .el-button[data-v-2f78a8a3] {\n    padding-right: 40px;\n    padding-left: 40px;\n}\n",""])},"BgX/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Ffjl"),s=a("MZ5m"),n=a("7hsi"),o=a("9ZUB"),r=a("7bg0"),l={props:["afterServiceId","orderNo","orderData"],data:function(){return{basicAbout:{},logisticsData:{},applyReasonImg:[],type:null,curSaleStatus:"",ifImg:!1,ifBackInfo:!1,loading:!1,stepActive:0}},created:function(){this.mountAfterServiceInfo()},methods:{isSuccessFn:function(t){t&&this.mountAfterServiceInfo()},mountAfterServiceInfo:function(){var t=this;this.loading=!0;var e={id:this.afterServiceId,timr:(new Date).getTime()};Object(s.e)(e).then(function(e){var a=e.data.afterSaleDo;if(0!==e.data.length&&a){t.basicAbout=a,e.data.afAftersaleExtDo&&(t.logisticsData=e.data.afAftersaleExtDo),t.type=t.basicAbout.type;var i=t.basicAbout.afterSaleStatus;t.$emit("getAfterServiceTpye",{type:t.type,status:i}),"NEW"===i&&(t.stepActive=0),1===t.type&&("WAIT_GOODS_BACK"===i&&(t.stepActive=1),"GOODS_BACKIING"===i&&(t.stepActive=2),"FINISH"!==i&&"CLOSING"!==i&&"NOTPASS"!==i&&"CLOSE"!==i&&"REFUNDING"!==i||(t.stepActive=4)),2===t.type&&("REFUNDING"===i&&(t.stepActive=1),"CLOSE"!==i&&"FINISH"!==i&&"NOTPASS"!==i||(t.stepActive=2)),3===t.type&&("WAIT_GOODS_BACK"===i&&(t.stepActive=1),"GOODS_BACKIING"===i&&(t.stepActive=2),"SELLER_SIGNED"===i&&(t.stepActive=3),"CLOSING"!==i&&"NOTPASS"!==i||(t.stepActive=6),"SELLER_DELIVER"===i&&(t.stepActive=4),"CLOSE"!==i&&"FINISH"!==i||(t.stepActive=6)),a.picVouchers?(t.applyReasonImg=a.picVouchers.split(","),t.ifImg=!0):t.ifImg=!1;var s={orderLogisticsNo:a.orderLogisticsNo,addressList:e.data.addressList,afterSaleStatus:a.afterSaleStatus};t.$emit("getAfterServiceData",s),t.setIfBackInfo(a.afterSaleStatus,a.logisticsNo),t.loading=!1}else t.loading=!1}).catch(function(){t.loading=!1})},updateLogistics:function(){},setIfBackInfo:function(t,e){console.log(t),this.ifBackInfo="GOODS_BACKIING"===t||"CLOSE"===t||!!e}},watch:{afterServiceId:function(t){t&&this.mountAfterServiceInfo()}},filters:{afterStatusTrans:n.b,afterType:n.c},components:{ImgPreview:o.a,Deliver:r.a}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"afterServiceInfo"},[a("el-card",{staticClass:"box-card"},[1==t.type?a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-steps",{attrs:{active:t.stepActive,simple:""}},[a("el-step",{attrs:{title:"待审核"}}),t._v(" "),a("el-step",{attrs:{title:"待买家发货"}}),t._v(" "),a("el-step",{attrs:{title:"待商家收货"}}),t._v(" "),"CLOSING"==t.basicAbout.afterSaleStatus||"NOTPASS"==t.basicAbout.afterSaleStatus||"CLOSE"==t.basicAbout.afterSaleStatus?a("el-step",{attrs:{title:"售后关闭"}}):a("el-step",{attrs:{title:"售后完成"}})],1)],1):t._e(),t._v(" "),2==t.type?a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},["CLOSING"==t.basicAbout.afterSaleStatus||"NOTPASS"==t.basicAbout.afterSaleStatus||"CLOSE"==t.basicAbout.afterSaleStatus?a("div",[a("el-steps",{attrs:{active:t.stepActive,simple:""}},[a("el-step",{attrs:{title:"待审核"}}),t._v(" "),a("el-step",{attrs:{title:"售后关闭"}})],1)],1):a("div",[a("el-steps",{attrs:{active:t.stepActive,simple:""}},[a("el-step",{attrs:{title:"待审核"}}),t._v(" "),a("el-step",{attrs:{title:"售后完成"}})],1)],1)]):t._e(),t._v(" "),3==t.type?a("div",["CLOSING"==t.basicAbout.afterSaleStatus||"CLOSE"==t.basicAbout.afterSaleStatus||"NOTPASS"==t.basicAbout.afterSaleStatus?a("div",[a("el-steps",{attrs:{active:t.stepActive,simple:""}},[a("el-step",{attrs:{title:"待审核"}}),t._v(" "),a("el-step",{attrs:{title:"待买家发货"}}),t._v(" "),a("el-step",{attrs:{title:"待商家收货"}}),t._v(" "),a("el-step",{attrs:{title:"售后关闭"}})],1)],1):a("div",[a("el-steps",{attrs:{active:t.stepActive,simple:""}},[a("el-step",{attrs:{title:"待审核"}}),t._v(" "),a("el-step",{attrs:{title:"待买家发货"}}),t._v(" "),a("el-step",{attrs:{title:"待商家收货"}}),t._v(" "),a("el-step",{attrs:{title:"待商家发货"}}),t._v(" "),a("el-step",{attrs:{title:"待买家收货"}}),t._v(" "),a("el-step",{attrs:{title:"售后完成"}})],1)],1)]):t._e(),t._v(" "),a("dl",{staticClass:"text item curStatus"},[a("dt",[t._v("当前售后状态："+t._s(t._f("afterStatusTrans")(t.basicAbout.afterSaleStatus,t.type)))]),t._v(" "),"NEW"==t.basicAbout.afterSaleStatus?a("dd",[t._v("买家提交售后申请，请于72小时内完成审核，逾期未审核将自动审核通过")]):t._e(),t._v(" "),"WAIT_GOODS_BACK"==t.basicAbout.afterSaleStatus?a("dd",[t._v("买家将在7天内回寄，逾期未回寄将自动关闭售后单")]):t._e(),t._v(" "),1==t.basicAbout.type?a("dd",["GOODS_BACKIING"==t.basicAbout.afterSaleStatus?a("p",[t._v("买家已回寄，10天未确认收货将自动确认并退款")]):t._e(),t._v(" "),"FINISH"==t.basicAbout.afterSaleStatus?a("p",[t._v("已退货退款")]):t._e(),t._v(" "),"CLOSING"==t.basicAbout.afterSaleStatus||"NOTPASS"==t.basicAbout.afterSaleStatus||"CLOSE"==t.basicAbout.afterSaleStatus?a("p",[t._v(t._s(t.basicAbout.closeCause))]):t._e()]):t._e(),t._v(" "),2==t.basicAbout.type?a("dd",["REFUNDING"==t.basicAbout.afterSaleStatus?a("p",[t._v("退款正在处理中，请稍后")]):t._e(),t._v(" "),"FINISH"==t.basicAbout.afterSaleStatus?a("p",[t._v("已退款")]):t._e(),t._v(" "),"CLOSING"==t.basicAbout.afterSaleStatus||"NOTPASS"==t.basicAbout.afterSaleStatus||"CLOSE"==t.basicAbout.afterSaleStatus?a("p",[t._v(t._s(t.basicAbout.closeCause))]):t._e()]):t._e(),t._v(" "),3==t.basicAbout.type?a("dd",["GOODS_BACKIING"==t.basicAbout.afterSaleStatus?a("p",[t._v("买家已回寄，收到后请确认收货再换货")]):t._e(),t._v(" "),"SELLER_SIGNED"==t.basicAbout.afterSaleStatus?a("p",[t._v("\n          已确认收货，请尽快换货回寄\n          "),a("span",{staticClass:"sendGood"},[a("Deliver",{attrs:{isAfterSale:!0,orderId:t.afterServiceId,type:"1"},on:{isSuccessFn:t.isSuccessFn}})],1)]):t._e(),t._v(" "),"SELLER_DELIVER"==t.basicAbout.afterSaleStatus?a("p",[t._v("已换货发出，请等待买家签收")]):t._e(),t._v(" "),"FINISH"==t.basicAbout.afterSaleStatus?a("p",[t._v("买家已签收，售后完成")]):t._e(),t._v(" "),"CLOSING"==t.basicAbout.afterSaleStatus||"NOTPASS"==t.basicAbout.afterSaleStatus||"CLOSE"==t.basicAbout.afterSaleStatus?a("p",[t._v(t._s(t.basicAbout.closeCause))]):t._e()]):t._e()])]),t._v(" "),a("el-card",{staticClass:"afterServiceAbout section"},[a("h4",[t._v("售后信息")]),t._v(" "),a("ul",{staticClass:"basicAbout sectionMain"},[a("li",[a("p",[t._v("订单编号：")]),t._v(" "),a("p",[t._v(t._s(t.orderNo))])]),t._v(" "),a("li",[a("p",[t._v("售后单号：")]),t._v(" "),a("p",[t._v(t._s(t.basicAbout.applyNo))])]),t._v(" "),a("li",[a("p",[t._v("售后类型：")]),t._v(" "),a("p",[t._v(t._s(t._f("afterType")(t.basicAbout.type)))])]),t._v(" "),a("li",[a("p",[t._v("售后原因：")]),t._v(" "),a("p",[t._v(t._s(t.basicAbout.refundCause))])]),t._v(" "),a("li",[a("p",[t._v("申请时间：")]),t._v(" "),a("p",[t._v(t._s(t.basicAbout.afterTime))])]),t._v(" "),3!=t.basicAbout.type?a("li",[a("p",[t._v("退款金额：")]),t._v(" "),a("p",[t._v(t._s(t.basicAbout.actualAmount?"￥"+t.basicAbout.actualAmount:"￥0"))])]):[a("li",[a("p",[t._v("换货商品：")]),t._v(" "),a("p",[t._v(t._s(t.logisticsData.goodsName))])]),t._v(" "),a("li",[a("p",[t._v("换货商品规格：")]),t._v(" "),a("p",[t._v(t._s(t.logisticsData.goodsPriceName))])]),t._v(" "),a("li",[a("p",[t._v("换货商品数量：")]),t._v(" "),a("p",[t._v(t._s(t.logisticsData.goodsCount))])]),t._v(" "),a("li",[a("p",[t._v("换货收货信息：")]),t._v(" "),a("p",[t._v(t._s(t.logisticsData.buyerName)+"-"+t._s(t.logisticsData.buyerMobile)+"-"+t._s(t.logisticsData.buyerAddress))])])],t._v(" "),a("li",[a("p",[t._v("售后说明：")]),t._v(" "),a("p",[t._v(t._s(t.basicAbout.userReason))])])],2),t._v(" "),a("div",{staticClass:"applyReason"},[a("div",[a("span",[t._v("图片凭证: ")]),t._v(" "),a("div",{staticClass:"imgBox"},[a("ImgPreview",{attrs:{imgList:t.applyReasonImg}})],1)])])]),t._v(" "),3==t.basicAbout.type&&"SELLER_DELIVER"==t.basicAbout.afterSaleStatus?a("el-card",{staticClass:"backInfo section"},[a("h4",[t._v("换货物流")]),t._v(" "),a("ul",{staticClass:"sectionMain"},[a("li",[a("p",[t._v("物流状态：")]),t._v(" "),a("p")]),t._v(" "),a("li",[a("p",[t._v("物流公司：")]),t._v(" "),a("p",[t._v(t._s(t.logisticsData.sellerLogisticsCompany))])]),t._v(" "),a("li",[a("p",[t._v("物流单号：")]),t._v(" "),a("p",[t._v(t._s(t.logisticsData.sellerLogisticsNo))])])]),t._v(" "),a("p",{staticStyle:{"text-align":"right"}},[a("Deliver",{attrs:{isAfterSale:!1,orderId:t.afterServiceId,type:"1",deliveryInfo:t.logisticsData},on:{isSuccessFn:t.isSuccessFn}})],1)]):t._e(),t._v(" "),t.ifBackInfo?a("el-card",{staticClass:"backInfo section"},[a("h4",[t._v("回寄信息")]),t._v(" "),a("ul",{staticClass:"sectionMain"},[t.basicAbout.returnTime||"WAIT_GOODS_BACK"===t.basicAbout.afterSaleStatus||"GOODS_BACKIING"===t.basicAbout.afterSaleStatus?a("li",[a("p",[t._v("回寄时间：")]),t._v(" "),a("p",[t._v(t._s(t.basicAbout.returnTime))])]):t._e(),t._v(" "),a("li",[a("p",[t._v("回寄信息：")]),t._v(" "),a("p",[t._v(t._s(t.orderData.receiver)+"-"+t._s(t.orderData.receiveMobile)+"-"+t._s(t.orderData.receiveAddress))])]),t._v(" "),a("li",[a("p",[t._v("物流公司：")]),t._v(" "),a("p",[t._v(t._s(t.basicAbout.logisticsCompany))])]),t._v(" "),a("li",[a("p",[t._v("物流单号：")]),t._v(" "),a("p",[t._v(t._s(t.basicAbout.logisticsNo))])])])]):t._e()],1)},staticRenderFns:[]};var c={data:function(){return{orderNo:"",afterServiceId:"",ifAgree:!1,ifApprove:!1,showAgree:!1,showRefuse:!1,showConfirm:!1,addressList:[],addressValue:"",ifAddressRadio:!1,noNeedBack:!1,submitType:"",isBackRadio:"0",ifHasAddress:!1,reasonTextarea:"",isRefuseWarn:!1,confirmBtnLoading:!1,isUserSend:!0,agreeBtnLoading:!1,agreeBtnType:"",refuseBtnType:"",type:null,afterStatus:null,orderData:null,checkedVisible:!1,closedVisible:!1,otherCauseVisible:!1,closeForm:{cause:"",other:""},closeRules:{cause:[{required:!0,message:"请选择原因",trigger:"change"}],other:[{required:!0,message:"请输入原因",trigger:"blur"}]},causeOption:[]}},created:function(){this.getId()},methods:{goBack:function(){this.$router.go(-1)},getId:function(){this.orderNo=this.$route.query.orderNo,this.afterServiceId=this.$route.query.afterServiceId,this.agreeButton(),this.getAfterCause()},getAfterServiceTpye:function(t){console.log(t),this.type=t.type,this.afterStatus=t.status},getorderNo:function(t){this.orderData=t},getAfterCause:function(){var t=this;Object(s.b)({}).then(function(e){1e3===e.code?t.causeOption=e.data:t.causeOption=[]})},getAfterServiceData:function(t){if(this.addressList=t.addressList,0===this.addressList.length)this.ifHasAddress=!1;else{this.ifHasAddress=!0;var e=this.addressList.find(function(t){return 1===t.isDefault});e&&(this.addressValue=e.id)}switch(this.isBackRadio="0",this.ifAddressRadio=!0,this.noNeedBack=!0,this.ifApprove=!1,this.ifAgree=!1,this.isUserSend=!0,t.afterSaleStatus){case"NEW":t.orderLogisticsNo||(this.ifAddressRadio=!1,this.isBackRadio="1"),this.ifApprove=!0;break;case"WAIT_GOODS_BACK":this.ifAgree=!1;break;case"GOODS_BACKIING":this.ifAgree=!0,this.isUserSend=!1}2===this.type&&(this.isBackRadio="1",this.addressValue="",this.ifAddressRadio=!1),3===this.type&&(this.isBackRadio="0",this.noNeedBack=!1)},agreeButton:function(){this.showAgree=!0,this.showRefuse=!1,this.showConfirm=!0,this.submitType="0",this.isRefuseWarn=!1,this.agreeBtnType="primary",this.refuseBtnType="",this.confirmBtnLoading=!1},refuseButton:function(){this.showAgree=!1,this.showRefuse=!0,this.showConfirm=!0,this.submitType="1",this.agreeBtnType="",this.refuseBtnType="primary",this.confirmBtnLoading=!1},confirmButton:function(){var t=this;if(this.confirmBtnLoading=!0,"1"!==this.submitType||this.reasonTextarea){var e={id:this.afterServiceId,submitType:this.submitType};if("1"===this.submitType)e.refuseReason=this.reasonTextarea;else if(e.backGoodsType=this.isBackRadio,"0"===this.isBackRadio){if(!this.addressValue)return;var a=this.addressList.find(function(e){return e.id===t.addressValue});e.backAddress=a.name+","+a.mobile+","+a.address}Object(s.n)(e).then(function(e){t.confirmBtnLoading=!1,t.$message({message:"已提交后台处理",type:"success"}),t.$router.go(-1)}).catch(function(){t.confirmBtnLoading=!1})}else this.isRefuseWarn=!0},confirmSignBack:function(){var t=this,e=3===this.type?"确认签收":"确认签收退款",a=3===this.type?"是否确认签收？签收后请及时给买家换货回寄":"确认签收并退款？";this.$confirm(a,e,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.agreeBtnLoading=!0;var e={id:t.afterServiceId};Object(s.t)(e).then(function(e){t.$message({type:"info",message:"已提交后台处理"}),t.agreeBtnLoading=!1,t.$router.go(-1)}).catch(function(){t.agreeBtnLoading=!1})}).catch(function(){})},causeSelect:function(t){this.otherCauseVisible="other"===t},closeFormSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;Object(s.a)({id:e.afterServiceId,closeCause:"other"===e.closeForm.cause?e.closeForm.other:e.closeForm.cause}).then(function(t){e.$message({message:"已提交后台处理",type:"success"}),e.$router.go(-1)}).catch(function(){})})}},components:{AfterServiceInfo:a("VU/8")(l,d,!1,function(t){a("VRDE")},"data-v-142d230c",null).exports,OrderInfo:i.a},computed:{textLength:function(){var t=50-this.reasonTextarea.length;return t>0?t:0},textLength02:function(){var t=50-this.closeForm.other.length;return t>0?t:0}},watch:{reasonTextarea:function(t){t&&(this.isRefuseWarn=!1)}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"aftersServiceDetail"},[t.orderData?a("AfterServiceInfo",{attrs:{afterServiceId:t.afterServiceId,orderNo:t.orderNo,orderData:t.orderData},on:{getAfterServiceData:t.getAfterServiceData,getAfterServiceTpye:t.getAfterServiceTpye}}):t._e(),t._v(" "),t.ifAgree?a("div",{staticClass:"agree"},[a("el-button",{attrs:{type:"primary",loading:t.agreeBtnLoading,disabled:t.isUserSend},on:{click:t.confirmSignBack}},[t._v("确认签收")]),t._v(" "),a("el-button",{attrs:{type:""},on:{click:function(e){t.closedVisible=!0}}},[t._v("关闭售后单")])],1):t._e(),t._v(" "),a("OrderInfo",{attrs:{orderNo:t.orderNo,type:t.type,isAfterSale:!0},on:{getorderNo:t.getorderNo}}),t._v(" "),a("div",[a("el-button",{on:{click:t.goBack}},[t._v("返回")]),t._v(" "),"NEW"==t.afterStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.checkedVisible=!0}}},[t._v("审核")]):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"审核选项",visible:t.checkedVisible,width:"500px"},on:{"update:visible":function(e){t.checkedVisible=e}}},[t.ifApprove?a("div",{staticClass:"approve"},[a("el-row",[a("span",[t._v("审核结果：")]),t._v(" "),a("p",{staticClass:"yesOrNo"},[a("el-button",{attrs:{type:t.agreeBtnType},on:{click:t.agreeButton}},[t._v("同意")]),t._v(" "),a("el-button",{attrs:{type:t.refuseBtnType},on:{click:t.refuseButton}},[t._v("拒绝")])],1)]),t._v(" "),t.showAgree?a("el-row",{staticClass:"agreeInfo"},[t.ifAddressRadio?a("p",[a("el-radio",{attrs:{label:"0"},model:{value:t.isBackRadio,callback:function(e){t.isBackRadio=e},expression:"isBackRadio"}},[t._v("将商品回寄至")]),t._v(" "),t.ifHasAddress?a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addressValue,callback:function(e){t.addressValue=e},expression:"addressValue"}},t._l(t.addressList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name+"，"+t.mobile+"，"+t.address}})})):t._e(),t._v(" "),t.ifHasAddress?t._e():a("span",[t._v("请先在店铺设置里添加回寄地址")])],1):t._e(),t._v(" "),t.noNeedBack?a("p",[a("el-radio",{attrs:{label:"1"},model:{value:t.isBackRadio,callback:function(e){t.isBackRadio=e},expression:"isBackRadio"}},[t._v("不需要回寄(确定同意即退款)")])],1):t._e()]):t._e(),t._v(" "),t.showRefuse?a("el-row",{class:{refuseInfo:!0,redWarning:t.isRefuseWarn}},[a("span",[t._v("备注原因：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:2},maxlength:"50",placeholder:"请输入拒绝原因"},model:{value:t.reasonTextarea,callback:function(e){t.reasonTextarea=e},expression:"reasonTextarea"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isRefuseWarn,expression:"isRefuseWarn"}],staticStyle:{"padding-left":"80px",color:"red","padding-bottom":"0px"}},[t._v("请输入拒绝原因")]),t._v(" "),a("p",[t._v("剩余字数："+t._s(t.textLength)+"/50")])],1):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.checkedVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:!t.ifHasAddress&&!t.showRefuse&&"0"===t.isBackRadio,loading:t.confirmBtnLoading},nativeOn:{click:function(e){t.confirmButton(e)}}},[t._v("确定")])],1)],1):t._e()]),t._v(" "),a("el-dialog",{attrs:{title:"关闭售后单",visible:t.closedVisible,width:"500px"},on:{"update:visible":function(e){t.closedVisible=e}}},[a("el-form",{ref:"closeForm",staticClass:"closeForm",attrs:{model:t.closeForm,rules:t.closeRules}},[a("el-form-item",{attrs:{label:"关闭原因：",prop:"cause"}},[a("el-select",{attrs:{placeholder:"请选择原因"},on:{change:t.causeSelect},model:{value:t.closeForm.cause,callback:function(e){t.$set(t.closeForm,"cause",e)},expression:"closeForm.cause"}},[1==t.type?[a("el-option",{attrs:{label:"查询不到有效物流信息",value:"查询不到有效物流信息"}}),t._v(" "),a("el-option",{attrs:{label:"商品不符合换货要求",value:"商品不符合退货要求"}}),t._v(" "),a("el-option",{attrs:{label:"与买家协商一致关闭",value:"与买家协商一致关闭"}})]:t._e(),t._v(" "),3==t.type?[a("el-option",{attrs:{label:"查询不到有效物流信息",value:"查询不到有效物流信息"}}),t._v(" "),a("el-option",{attrs:{label:"商品不符合换货要求",value:"商品不符合换货要求"}})]:t._e(),t._v(" "),a("el-option",{attrs:{label:"其他原因",value:"other"}})],2)],1),t._v(" "),t.otherCauseVisible?a("el-form-item",{attrs:{label:"其他原因：",prop:"other"}},[a("el-input",{staticStyle:{width:"368px"},attrs:{type:"textarea",autosize:{minRows:2},maxlength:"50"},model:{value:t.closeForm.other,callback:function(e){t.$set(t.closeForm,"other",e)},expression:"closeForm.other"}}),t._v(" "),a("p",{staticClass:"num"},[t._v("剩余字数："+t._s(t.textLength02)+"/50")])],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.closedVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.closeFormSubmit("closeForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(c,v,!1,function(t){a("nJR6")},"data-v-2f78a8a3",null);e.default=p.exports},Ffjl:function(t,e,a){"use strict";var i=a("mvHQ"),s=a.n(i),n=a("MZ5m"),o=a("7bg0"),r=a("GKmE"),l={props:["orderId"],data:function(){return{dialogVisible:!1,deliveryPathList:[]}},created:function(){this.mountDeliveryPath()},methods:{showDialog:function(){this.dialogVisible=!0},confirm:function(){this.dialogVisible=!1},mountDeliveryPath:function(){var t=this;this.orderId&&Object(n.i)(this.orderId).then(function(e){if(0!==e.data.length){if(e.data[0]&&"暂无物流轨迹"===e.data[0].acceptStation)return e.data[0].acceptTime="",void(t.deliveryPathList=e.data);var a=e.data.map(function(t){var e=Object(r.c)(t.acceptTime).split(" ");return{acceptTime:{day:e[0],time:e[1]},acceptStation:t.acceptStation}});t.deliveryPathList=a.reverse()}else t.deliveryPathList=[]})}},watch:{orderId:function(t){t&&this.mountDeliveryPath()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deliveryDialog"},[a("div",{staticClass:"deliveryText"},[a("a",{attrs:{href:"javascript:;"},on:{click:t.showDialog}},[t._v("查看物流信息")])]),t._v(" "),a("el-dialog",{attrs:{title:"查看物流",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"deliveryPath"},[a("ul",t._l(t.deliveryPathList,function(e,i){return a("li",{key:i},[a("div",{staticClass:"date"},[a("p",[t._v(t._s(e.acceptTime.day))]),t._v(" "),a("p",[t._v(t._s(e.acceptTime.time))])]),t._v(" "),a("div",{staticClass:"path"},[t._v(t._s(e.acceptStation))]),t._v(" "),a("i",{staticClass:"el-icon-location"})])}))]),t._v(" "),a("div",{staticClass:"btnOper"},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(t){a("ZMo1")},"data-v-1c7d1cb8",null).exports,v=a("9ZUB"),p=a("7hsi"),f={props:["orderNo","isAfterSale","type"],data:function(){return{orderInfoData:{afOrderHaitaoInfoDo:{}},deliveryInfo:{code:"",name:"",number:"",orderNo:""},isShowGmtName:!1,orderId:"",ifDeliveryDialog:!1,ifModifyDialog:!1,idImg:[],loading:!1}},created:function(){this.mountOrderInfo()},methods:{mountOrderInfo:function(){var t=this;this.loading=!0,Object(n.k)(this.orderNo).then(function(e){"{}"!==s()(e.data)?("FINISHED"===e.data.status||"REBATED"===e.data.status?(e.data.gmtClosedName="完成时间：",t.isShowGmtName=!0):"CLOSED"===e.data.status?(e.data.gmtClosedName="关闭时间：",t.isShowGmtName=!0):t.isShowGmtName=!1,["PAID","NEW","DEALING","PAYFAIL"].indexOf(e.data.status)>-1?(t.ifDeliveryDialog=!1,t.ifModifyDialog=!1):["FINISHED","CLOSED","REBATED"].indexOf(e.data.status)>-1||t.isAfterSale?(t.ifModifyDialog=!1,t.ifDeliveryDialog=!0):(t.ifDeliveryDialog=!0,t.ifModifyDialog=!0),["NEW","DEALING","PAYFAIL"].indexOf(e.data.status)>-1&&(e.data.actualPayAmount=""),e.data.afOrderHaitaoInfoDo?(e.data.afOrderHaitaoInfoDo.cardBehind&&t.idImg.push(e.data.afOrderHaitaoInfoDo.cardBehind),e.data.afOrderHaitaoInfoDo.cardFront&&t.idImg.push(e.data.afOrderHaitaoInfoDo.cardFront)):e.data.afOrderHaitaoInfoDo={idNumber:"",cardBehind:"",cardFront:""},t.orderInfoData=e.data,t.orderId=e.data.id,t.deliveryInfo={code:e.data.logisticCode,name:e.data.logisticCompany,number:e.data.logisticNo,orderNo:e.data.orderNo},t.$emit("getorderNo",e.data),t.loading=!1):t.loading=!1}).catch(function(){t.loading=!1})},isSuccessFn:function(t){t&&this.mountOrderInfo(!0)},goBack:function(){this.$router.go(-1)}},watch:{orderNo:function(t){t&&this.mountOrderInfo()}},components:{EditDialog:o.a,DeliveryDialog:c,ImgPreview:v.a},filters:{orderStatusTrans:p.i}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"orderInfo"},[a("el-card",{staticClass:"orderAbout section"},[a("h4",[t._v("订单信息")]),t._v(" "),a("ul",{staticClass:"sectionMain"},[a("li",[a("p",[t._v("订单号：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.orderNo))])]),t._v(" "),a("li",[a("p",[t._v("订单状态：")]),t._v(" "),a("p",[t._v(t._s(t._f("orderStatusTrans")(t.orderInfoData.status)))])]),t._v(" "),a("li",[a("p",[t._v("创建时间：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.gmtCreate))])]),t._v(" "),a("li",[a("p",[t._v("付款时间：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.gmtPay))])]),t._v(" "),a("li",[a("p",[t._v("发货时间：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.gmtDeliver))])]),t._v(" "),a("li",[a("p",[t._v("完成时间：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.gmtFinish))])]),t._v(" "),a("li",[a("p",[t._v("店铺优惠券：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.shopCouponAmount))])]),t._v(" "),a("li",[a("p",[t._v("平台优惠券：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.couponAmount))])]),t._v(" "),a("li",[a("p",{staticStyle:{width:"205px"}},[t._v("订单实付（含平台优惠券）：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.actualPayAmount?"￥"+t.orderInfoData.actualPayAmount:"￥0"))])]),t._v(" "),t.isShowGmtName?a("li",[a("p",[t._v(t._s(t.orderInfoData.gmtClosedName))]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.gmtClosed))])]):t._e()])]),t._v(" "),a("el-card",{staticClass:"goodsAbout section"},[a("h4",[t._v("商品信息")]),t._v(" "),a("ul",{staticClass:"sectionMain"},[a("el-table",{attrs:{data:[t.orderInfoData],"max-height":"300",border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"marque",label:"货号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.marque)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsIcon",label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.goodsIcon,width:"85px",alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"priceName",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"priceCode",label:"规格编码"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.priceCode)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"priceAmount",label:"单价"}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",label:"数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"优惠"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.goodsDiscountAmount)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"实付款"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.actualPayAmount?"￥"+e.row.actualPayAmount:""))]),t._v(" "),a("p",[t._v(t._s(e.row.actualPayAmount&&e.row.freightAmount?"(含快递："+e.row.freightAmount+")":""))])]}}])})],1)],1)]),t._v(" "),t.isAfterSale?t._e():[t.isAfterSale?t._e():a("el-card",{staticClass:"buyerAbout section"},[a("h4",[t._v("买家信息")]),t._v(" "),a("ul",{staticClass:"sectionMain"},[a("li",[a("p",[t._v("买家账号：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.account))])]),t._v(" "),a("li",[a("p",[t._v("本店购买次数：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.buyCount))])])])]),t._v(" "),a("el-card",{staticClass:"deliveryAbout section"},[a("h4",[t._v("收货和物流信息")]),t._v(" "),a("ul",{staticClass:"sectionMain"},[a("li",[a("p",[t._v("收货人：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.receiver))])]),t._v(" "),a("li",[a("p",[t._v("收货号码：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.receiveMobile))])]),t._v(" "),a("li",[a("p",[t._v("收货地址：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.receiveAddress))])]),t._v(" "),a("li",[a("p",[t._v("身份证号：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.afOrderHaitaoInfoDo.idNumber))])]),t._v(" "),a("li",[a("p",[t._v("身份证照片：")]),t._v(" "),a("p",[a("ImgPreview",{attrs:{imgList:t.idImg}})],1)]),t._v(" "),a("li",[a("p",[t._v("物流公司：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.logisticCompany))])]),t._v(" "),a("li",[a("p",[t._v("物流单号：")]),t._v(" "),a("p",[t._v(t._s(t.orderInfoData.logisticNo))])])]),t._v(" "),a("div",{staticClass:"editDelivery"},[t.ifModifyDialog?a("EditDialog",{attrs:{deliveryInfo:t.deliveryInfo,isModify:!0,type:"0"},on:{isSuccessFn:t.isSuccessFn}}):t._e(),t._v(" "),t.ifDeliveryDialog?a("DeliveryDialog",{attrs:{orderId:t.orderId}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"back"},[a("el-button",{attrs:{type:"default"},on:{click:t.goBack}},[t._v("返回")])],1)]],2)},staticRenderFns:[]};var _=a("VU/8")(f,u,!1,function(t){a("mnwg")},"data-v-533b5c1d",null);e.a=_.exports},VRDE:function(t,e,a){var i=a("bf+0");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("a44ecb5a",i,!0)},ZMo1:function(t,e,a){var i=a("06/Q");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("1616b95c",i,!0)},"bf+0":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.afterServiceInfo[data-v-142d230c] {\n  padding-bottom: 20px;\n}\n.afterServiceInfo h3[data-v-142d230c] {\n    padding: 20px 0;\n    font-weight: 700;\n}\n.afterServiceInfo .curStatus[data-v-142d230c] {\n    position: relative;\n}\n.afterServiceInfo .curStatus dt[data-v-142d230c] {\n      font-size: 16px;\n      line-height: 60px;\n      font-weight: 600;\n}\n.afterServiceInfo .curStatus .sendGood[data-v-142d230c] {\n      display: inline-block;\n      width: 80px;\n      height: 35px;\n      text-align: center;\n      line-height: 35px;\n      margin-left: 10px;\n      border: 1px solid #409EFF;\n      border-radius: 10px;\n      background: #409EFF;\n}\n.afterServiceInfo .curStatus .sendGood[data-v-142d230c] a {\n        color: #fff;\n}\n.section[data-v-142d230c] {\n  margin-bottom: 20px;\n  margin-top: 20px;\n}\n.section h4[data-v-142d230c] {\n    margin-bottom: 20px;\n    font-weight: 700;\n}\n.section .sectionMain[data-v-142d230c] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n.section .sectionMain li[data-v-142d230c] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      width: 33.3%;\n      min-width: 33.3%;\n      max-width: 33.3%;\n      padding-bottom: 20px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      word-break: break-all;\n      padding-right: 20px;\n}\n.section .sectionMain li p[data-v-142d230c]:first-child {\n        -webkit-box-flex: 4;\n            -ms-flex: 4;\n                flex: 4;\n        color: #666;\n}\n.section .sectionMain li p[data-v-142d230c]:last-child {\n        -webkit-box-flex: 9;\n            -ms-flex: 9;\n                flex: 9;\n}\n.section .sectionMain .addressLi[data-v-142d230c] {\n      width: 66.6%;\n      min-width: 66.6%;\n      max-width: 66.6%;\n}\n.section .sectionMain .addressLi p[data-v-142d230c]:first-child {\n        -webkit-box-flex: 2;\n            -ms-flex: 2;\n                flex: 2;\n}\n.section .sectionMain .addressLi p[data-v-142d230c]:last-child {\n        -webkit-box-flex: 11;\n            -ms-flex: 11;\n                flex: 11;\n}\n.applyReason[data-v-142d230c] {\n  padding-top: 20px;\n}\n.applyReason p[data-v-142d230c] {\n    padding: 20px 0;\n}\n.applyReason p span[data-v-142d230c] {\n      padding-right: 10px;\n      color: #666;\n}\n",""])},mnwg:function(t,e,a){var i=a("74xR");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("629be3ce",i,!0)},nJR6:function(t,e,a){var i=a("7DV6");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("ed8f2b36",i,!0)}});