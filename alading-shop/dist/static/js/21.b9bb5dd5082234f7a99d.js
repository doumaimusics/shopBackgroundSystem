webpackJsonp([21],{"/CjR":function(t,a,n){var i=n("yIf7");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("2ad643cd",i,!0)},"7qHI":function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=n("1onU"),e=n("kJAB"),s=n("8ghC"),o=n("7hsi"),d={components:{Pagination:i.a,ActivityInfo:e.a},data:function(){return{tableData:[],pagination:{pageNo:1,pageSize:20,totalCount:0},infoData:{baseInfo:{}},id:"",dialogVisible:!1,formData:[],goodsId:""}},created:function(){var t=this;this.getParams(),this.getDetail(),setTimeout(function(){t.getTableData()},1)},methods:{getParams:function(){this.id=this.$route.query.id},getDetail:function(){var t=this,a={id:this.id,activityType:2};Object(s.m)(a).then(function(a){t.infoData={baseInfo:{activityType:a.data.afActivityEnterDo.activityType,name:a.data.name,showAddress:a.data.afActivityEnterDo.showAddress,time:a.data.gmtStartTime+" 至 "+a.data.gmtEndTime,status:a.data.startStatus,level:Object(o.f)(a.data.type,a.data.threshold,a.data.discountAmount,a.data.discountType)}}})},getTableData:function(){var t=this,a={activityEnterId:this.id,activityType:2,pageNo:this.pagination.pageNo};Object(s.n)(a).then(function(a){t.tableData=a.data||[],t.pagination.totalCount=a.totalCount,t.pagination.pageSize=a.pageSize})},handleCurrentChange:function(t){this.pagination.pageNo=t,this.getTableData()},addAmount:function(t){var a=this;if(this.dialogVisible=!0,this.goodsId===t)this.formData.forEach(function(t){t.amount=void 0});else{this.formData=[],this.goodsId=t;var n={activityEnterId:this.id,goodsId:t};Object(s.k)(n).then(function(t){a.formData=t.data})}},onCancel:function(){this.dialogVisible=!1},onSubmit:function(){var t=this,a=!0;if(this.formData.forEach(function(t){t.amount&&(a=!1)}),a)this.$message({type:"warning",message:"请输入增加的库存量"});else{var n={activityEnterId:this.id};n.activityEnterGoodsVos=this.formData.filter(function(t){return!!t.amount}).map(function(t){return{id:t.id,goodsId:t.goodsId,priceId:t.priceId,limitCount:t.amount}}),Object(s.A)(n).then(function(a){t.$message({type:"success",message:"库存增加成功"}),t.dialogVisible=!1})}}}},l={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"activityDetail"},[n("el-card",{staticClass:"table"},[n("h4",[t._v("报名的商品")]),t._v(" "),n("el-table",{attrs:{data:t.tableData,stripe:""}},[n("el-table-column",{attrs:{prop:"goodsId",label:"商品ID"}}),t._v(" "),n("el-table-column",{attrs:{label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("div",{staticClass:"imgBox"},[n("img",{attrs:{src:t.row.goodsIcon,alt:""}})])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"商品名称","min-width":"150"}}),t._v(" "),n("el-table-column",{attrs:{label:"活动价"},scopedSlots:t._u([{key:"default",fn:function(a){return[n("span",[t._v(t._s(a.row.minSpecialPrice))]),t._v(" "),a.row.minSpecialPrice!==a.row.maxSpecialPrice?n("span",[t._v("-")]):t._e(),t._v(" "),a.row.minSpecialPrice!==a.row.maxSpecialPrice?n("span",[t._v(t._s(a.row.maxSpecialPrice))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"payOrderCount",label:"总支付订单"}}),t._v(" "),n("el-table-column",{attrs:{prop:"totalPayAmount",label:"总支付金额"}}),t._v(" "),n("el-table-column",{attrs:{prop:"refundOrderCount",label:"退款订单"}}),t._v(" "),n("el-table-column",{attrs:{prop:"totalRefundAmount",label:"退款金额"}}),t._v(" "),2!==t.infoData.baseInfo.activityType?n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){t.addAmount(a.row.goodsId)}}},[t._v("增加库存")])]}}])}):t._e()],1),t._v(" "),n("Pagination",{attrs:{pageNo:t.pagination.pageNo,pageSize:t.pagination.pageSize,totalCount:t.pagination.totalCount,handleChange:t.handleCurrentChange}})],1),t._v(" "),n("ActivityInfo",{attrs:{data:t.infoData,isJoined:!0}}),t._v(" "),n("el-dialog",{staticClass:"dialog",attrs:{title:"增加库存",width:"500px",visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(a){t.dialogVisible=a}}},[n("div",{staticClass:"field"},[n("div",{staticClass:"left"},[t._v("规格")]),t._v(" "),n("div",{staticClass:"right"},[t._v("库存")])]),t._v(" "),n("ul",{staticClass:"sku"},t._l(t.formData,function(a){return n("li",{key:a.id},[n("p",[t._v(t._s(a.specNames))]),t._v(" "),n("div",[n("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:a.amount,callback:function(n){t.$set(a,"amount",n)},expression:"item.amount"}})],1)])})),t._v(" "),n("div",{staticClass:"btn"},[n("el-button",{attrs:{type:"default"},on:{click:t.onCancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var c=n("VU/8")(d,l,!1,function(t){n("/CjR")},"data-v-03f1e3fa",null);a.default=c.exports},Cf94:function(t,a,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.card[data-v-27dea4ae] {\n  margin-bottom: 20px;\n}\n.card h4[data-v-27dea4ae] {\n  font-weight: 700;\n  padding-bottom: 20px;\n  font-size: 16px;\n}\n.card ul[data-v-27dea4ae] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.card ul li[data-v-27dea4ae] {\n  width: 40%;\n  padding-bottom: 30px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.card ul li.statusLi[data-v-27dea4ae] {\n  width: 100%;\n}\n.card ul span[data-v-27dea4ae] {\n  vertical-align: middle;\n}\n.card ul .title[data-v-27dea4ae] {\n  width: 130px;\n}\n.card ul .content[data-v-27dea4ae] {\n  color: #666;\n}\n",""])},FR6e:function(t,a,n){var i=n("Cf94");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("0a433954",i,!0)},kJAB:function(t,a,n){"use strict";var i=n("9ZUB"),e=n("7hsi"),s=n("GKmE"),o={props:["data","isJoined","type"],components:{ImgPreview:i.a},filters:{activityTypeTrans:e.a,formatTimestamp:s.c,joinedActivityStatusTrans:e.h},computed:{baseInfo:function(){return this.data&&this.data.baseInfo?this.data.baseInfo:{}},demand:function(){if(this.data&&this.data.demand){var t=this.data.demand;return t.goodsAmountDemand?t.priceLimit="<= "+t.goodsAmountDemand+"元":t.goodsAmountDiscountDemand&&(t.priceLimit="<= "+t.goodsAmountDiscountDemand+"折"),t.goodsStockDemandMin&&(t.stockLimit=">= "+t.goodsStockDemandMin),t.goodsStockDemandMax&&(t.stockLimit="<= "+t.goodsStockDemandMax),t.goodsStockDemandMin&&t.goodsStockDemandMax&&(t.stockLimit=t.goodsStockDemandMin+" ~ "+t.goodsStockDemandMax),t}return{}}}},d={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"activityInfo"},[n("el-card",{staticClass:"baseInfo card"},[n("h4",[t._v("活动基本信息")]),t._v(" "),n("ul",[t.isJoined?n("li",{staticClass:"statusLi"},[n("span",{staticClass:"title"},[t._v("活动状态：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t._f("joinedActivityStatusTrans")(t.baseInfo.status)))])]):t._e(),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v("活动类型：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t._f("activityTypeTrans")(t.baseInfo.activityType)))])]),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v("活动名称：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t.baseInfo.name))])]),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v("活动展现位置：")]),t._v(" "),n("span",{staticClass:"content"},[n("ImgPreview",{attrs:{imgList:[t.baseInfo.showAddress]}})],1)]),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v("活动起止时间：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t.baseInfo.time))])]),t._v(" "),2===t.baseInfo.activityType?n("li",[n("span",{staticClass:"title"},[t._v("活动力度：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t.baseInfo.level))])]):t._e()])]),t._v(" "),t.isJoined?t._e():n("el-card",{staticClass:"demand card"},[n("h4",[t._v("活动报名要求")]),t._v(" "),n("ul",[n("li",[n("span",{staticClass:"title"},[t._v("类目要求：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t.demand.categoryDemand?t.demand.categoryDemand:"不限"))])]),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v("品牌要求：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t.demand.brandDemand?t.demand.brandDemand:"不限"))])]),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v("商品销量要求：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t.demand.goodsSaleDemand?">= "+t.demand.goodsSaleDemand:"不限"))])]),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v(t._s(2===t.baseInfo.activityType?"商品库存要求：":"商品活动库存要求："))]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t.demand.stockLimit?t.demand.stockLimit:"不限"))])]),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v(t._s(2===t.baseInfo.activityType?"商品价格要求：":"商品活动价格要求："))]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t.demand.priceLimit?t.demand.priceLimit:"不限"))])]),t._v(" "),4==t.type?n("li",[n("span",{staticClass:"title"},[t._v("商品成团人数要求：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(0==t.demand.pintuanManMin&&0==t.demand.pintuanManMax?"不限":t.demand.pintuanManMin+"-"+t.demand.pintuanManMax+"人"))])]):t._e(),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v("商品运费要求：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(2===t.demand.freightType?"包邮（活动期间用户下单默认包邮）":"不限"))])]),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v("报名商品数量限制：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t.demand.goodsCountDemand?"<= "+t.demand.goodsCountDemand:"不限"))])]),t._v(" "),n("li",[n("span",{staticClass:"title"},[t._v("报名结束时间：")]),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(t._f("formatTimestamp")(t.demand.gmtEnd)))])])])])],1)},staticRenderFns:[]};var l=n("VU/8")(o,d,!1,function(t){n("FR6e")},"data-v-27dea4ae",null);a.a=l.exports},yIf7:function(t,a,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.activityDetail[data-v-03f1e3fa] {\n  padding: 20px;\n}\n.table[data-v-03f1e3fa] {\n  margin-bottom: 30px;\n}\n.table h4[data-v-03f1e3fa] {\n  font-weight: 700;\n  font-size: 16px;\n  padding-bottom: 10px;\n}\n.table .imgBox[data-v-03f1e3fa] {\n  width: 60px;\n  height: 60px;\n}\n.table .imgBox img[data-v-03f1e3fa] {\n  width: auto;\n  max-height: 100%;\n}\n.dialog .field[data-v-03f1e3fa] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding-bottom: 20px;\n  font-weight: 700;\n}\n.dialog .field div[data-v-03f1e3fa] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.dialog .sku li[data-v-03f1e3fa] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.dialog .sku li p[data-v-03f1e3fa] {\n  margin-bottom: 22px;\n  height: 36px;\n  line-height: 36px;\n  width: 50%;\n}\n.dialog .btn[data-v-03f1e3fa] {\n  text-align: right;\n  padding-top: 20px;\n  padding-right: 30px;\n}\n",""])}});